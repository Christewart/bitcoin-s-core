package org.bitcoins.core.protocol.tlv

import org.bitcoins.testkitcore.util.BitcoinSUnitTest

class AnnouncementV0Test extends BitcoinSUnitTest {

  behavior of "AnnouncementV0"

  it must "have a valid signature for the december 10 announcement" in {
    val hex =
      "fdd824fd02d4efe07f085a77d5b66e845093116203b7cdee85e835553d2de3af34a01608c3770826a6c06a2f0035127506bb4388be40bb02cae76a453692c6112e71ac79e64604ba9838623f02c940d20d7b185d410178cff7990c7fcf19186c7f58c7c4b8defdd822fd026e00124fbe1592d4b5576c4b94d6f9bed689f42f30897664178a04a9f38df8a069ea45539a5450dc0f7a84683f04b849dda81f888bdbb50cfc10b647eb724826d4254100ff0fe0e15e1a8810311386f44a8fcde54e626b2e13221818e4a9b09b734c0a15262ab2d0c7b7f71d70cbf89cd7e3d4e3278405ecd912cff9005321e8326423898f3cc1c31e790f690bf300e6cbdf92e274338dadae775a2542886b10b913a49912d8ac749ab63f88076de418db5aa1b07ab98125db93e70c10d2b8417068d1ccfcb7c76dc67ac6f85fb80fe468a4047deb2f6e6321c32b06ba48c1ad1e75bf299d74310b26418b5b69dd6e5c4bca3e3f0b51041a106bfaf3997a8dc0872e230834c1e0391eb1b44652e0d6e3ac065d3dc2184c2da1ceb3e4db7529935a2c500e2d99033d3515ff3d044cbf766c4c82cc339867ea228ff3b45e43ce7bd071e77ba95d3fb01ef7eef805d882ac574e6b6fd04457584928bf6b96f5593988244e864e430879a46c7af487e829719ca1677371cfe468dae87619aeb2661645fe6512bdf4eb0969195eea13feabf64f0a3bd5cf07612a2b23c7d388e47c8708b1679e204140dfa0c368e27c8cabf2d28551a587240c1c36b3e0f110581ab8f212f10436147ae1a0371c054c336f108f3a868aa4054f608b5c79ef8db590d033ea3a90ae4c5b900c076b1793ed5f667e935bc2238e4ed2980c73dd0d9f7a5fb75b8b43d43f0a9b19beffe14adc603682e2732dde5eb06fa7ce05f47fcf98ca7c6a5ce3eb2a25de80ee06b0e51a7d4353fca99eb4801123f90af2271bdabdb2c660aa61b30900fdd80a100002000642544355534400000000001213446572696269742d4254432d31304445433231"
    val ann = OracleAnnouncementV0TLV.fromHex(hex)
    println(s"ann.pubKey=${ann.publicKey.hex}")
    assert(ann.validateSignature)
    succeed
  }
}
